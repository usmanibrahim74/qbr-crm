(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{11:function(t,e,a){"use strict";var r={name:"Breadcrumbs"},n=a(1),s=Object(n.a)(r,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"#"}},[this._v("Apps")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[this._v("Dashboard")])])])}],!1,null,"5cad8d16",null);e.a=s.exports},37:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),s=a(11),o=a(3),i=a(14),c=a.n(i),u=a(4),l=a.n(u),p=a(2),d=a.n(p);function m(t,e,a,r,n,s,o){try{var i=t[s](o),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,n)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var s=t.apply(e,a);function o(t){m(s,r,n,o,i,"next",t)}function i(t){m(s,r,n,o,i,"throw",t)}o(void 0)}))}}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){_(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g={name:"groups",data:function(){return{add_report_modal:new d.a({name:"",company:0,groups:[],date:""}),delete_modal:{show:!1,message:""},deleteTarget:{target:null,type:""}}},components:{Breadcrumbs:s.a},computed:h(h({},Object(o.c)({groups:"app/groups",group_items_count:"app/group_items_count"})),{},{columnGroups:function(){var t=Math.ceil(this.group_items_count);t+=this.groups.length,t=Math.ceil(t/3);var e=0,a=[[],[],[]];return this.groups.forEach((function(r){var n=r.items?r.items.length:0;(e+=n+1)<=t?a[0]=a[0].concat([r]):e<=2*t?a[1]=a[1].concat([r]):e<=3*t&&(a[2]=a[2].concat([r]))})),a}}),beforeCreate:function(){this.$store.dispatch("app/fetchGroupsWithItems")},methods:{save:function(t,e){e.action=t,this.$store.dispatch("app/save",e)},updateGroupItem:c.a.debounce(function(){var t=f(n.a.mark((function t(e){var a,r,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new d.a({item_name:e.name}),t.next=3,a.put("api/items/".concat(e.id));case 3:r=t.sent,s=r.data,this.save("UPDATE_GROUP_ITEM",s);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),2e3),updateGroup:c.a.debounce(function(){var t=f(n.a.mark((function t(e){var a,r,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new d.a({group_name:e.name}),t.next=3,a.put("api/groups/".concat(e.id));case 3:r=t.sent,s=r.data,this.save("UPDATE_GROUP",s);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),2e3),addItem:function(t){var e=this;return f(n.a.mark((function a(){var r,s,o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new d.a({group_id:t}),a.next=3,r.post("/api/items/add");case 3:s=a.sent,o=s.data,e.save("ADD_GROUP_ITEM",o);case 6:case"end":return a.stop()}}),a)})))()},addGroup:function(){var t=this;return f(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/api/groups/add");case 2:a=e.sent,r=a.data,t.save("ADD_GROUP",r);case 5:case"end":return e.stop()}}),e)})))()},deleteGroup:function(t){this.delete_modal.message="Are you sure you want to delete this group?",this.delete_modal.show=!0,this.deleteTarget.target=t,this.deleteTarget.type="group"},deleteGroupItem:function(t){this.delete_modal.message="Are you sure you want to delete this group item?",this.delete_modal.show=!0,this.deleteTarget.target=t,this.deleteTarget.type="group_item"},close:function(){this.delete_modal.show=!1,this.add_report_modal.show=!1},removeTarget:function(){var t=this;return f(n.a.mark((function e(){var a,r,s,o,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.deleteTarget.target,"group"!=(r=t.deleteTarget.type)){e.next=11;break}return e.next=5,l.a.delete("api/groups/".concat(a.id));case 5:s=e.sent,s.data,o={group:a},t.save("DELETE_GROUP",o),e.next=18;break;case 11:if("group_item"!=r){e.next=18;break}return e.next=14,l.a.delete("api/items/".concat(a.id));case 14:i=e.sent,i.data,c={item:a},t.save("DELETE_GROUP_ITEM",c);case 18:t.close();case 19:case"end":return e.stop()}}),e)})))()}}},b=a(1),w=Object(b.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-info"},[a("breadcrumbs"),t._v(" "),a("div",{staticClass:"page-options"},[a("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"report.create"}}},[t._v("Create Report")]),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:t.addGroup}},[t._v("Add Group")])],1)],1),t._v(" "),a("div",{staticClass:"main-wrapper"},[a("div",{staticClass:"row"},t._l(t.columnGroups,(function(e,r){return a("div",{key:r,staticClass:"col-xl"},t._l(e,(function(e,r){return a("div",{key:r,staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"item-title table-field-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"group.name"}],staticClass:"table-field table-field-title",attrs:{type:"text",placeholder:"Enter Group Name"},domProps:{value:e.name},on:{input:[function(a){a.target.composing||t.$set(e,"name",a.target.value)},function(a){return t.updateGroup(e)}]}})]),t._v(" "),a("div",{staticClass:"item-actions"},[a("a",{staticClass:"text-muted py-0 px-1",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.addItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),a("a",{staticClass:"text-muted py-0 px-1",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteGroup(e)}}},[a("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)])])]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush"},t._l(e.items,(function(e,r){return a("li",{key:r,staticClass:"list-group-item"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"item-title table-field-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"table-field",attrs:{type:"text",placeholder:"Enter Item Name"},domProps:{value:e.name},on:{input:[function(a){a.target.composing||t.$set(e,"name",a.target.value)},function(a){return t.updateGroupItem(e)}]}})]),t._v(" "),a("div",{staticClass:"item-actions"},[a("a",{staticClass:"text-muted py-0 px-1",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteGroupItem(e)}}},[a("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)])])])})),0)])})),0)})),0)]),t._v(" "),a("b-modal",{attrs:{centered:""},scopedSlots:t._u([{key:"modal-header",fn:function(e){var r=e.close;return[a("h5",[t._v("Are you sure?")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:r}},[a("i",{staticClass:"material-icons"},[t._v("close")])])]}},{key:"modal-footer",fn:function(e){var r=e.close;e.remove;return[a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return r()}}},[t._v("\n        Cancel\n      ")]),t._v(" "),a("b-button",{attrs:{variant:"danger"},on:{click:t.removeTarget}},[t._v("\n        Delete\n      ")])]}}]),model:{value:t.delete_modal.show,callback:function(e){t.$set(t.delete_modal,"show",e)},expression:"delete_modal.show"}},[t._v(" "),a("p",[t._v(t._s(t.delete_modal.message))])])],1)}),[],!1,null,"49d8c1aa",null);e.default=w.exports}}]);